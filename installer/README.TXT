
================================================================================
     CorvusSKK version 0.7.5

     http://code.google.com/p/corvus-skk/
     corvussolis@gmail.com
================================================================================

  Windows XP, Vista, 7, (8 Release Preview) に多分対応する、
  SKK風の Text Input Processor です。いわゆる IME です。



--------------------------------------------------------------------------------
     インストール
--------------------------------------------------------------------------------


１．必須ライブラリ のインストール

  32bit版 Windows では x86 の VC++ パッケージのみを、
  64bit版 Windows では x86 と x64 の VC++ パッケージの両方を
  予めインストールして下さい。

  Microsoft Visual C++ 2010 SP1 再頒布可能パッケージ (x86)
  http://www.microsoft.com/downloads/ja-jp/details.aspx?FamilyID=c32f406a-f8fc-4164-b6eb-5328b8578f03

  Microsoft Visual C++ 2010 SP1 再頒布可能パッケージ (x64)
  http://www.microsoft.com/downloads/ja-jp/details.aspx?FamilyID=c68ccbb6-75ef-4c9d-a326-879eab4fcdf8

  XPでは、SP3(x64はSP2) または IE7以降 または XP用XMLLite を
  予めインストールして下さい。

  Windows XP 用 XMLLite (KB915865)
  http://www.microsoft.com/downloads/ja-jp/details.aspx?FamilyID=d7b5dc81-ad14-4de2-8ad5-8c4a9aab5992
  
  Windows XP x64 Edition 用 XMLLite (KB915865) 
  http://www.microsoft.com/downloads/ja-jp/details.aspx?FamilyID=c7cb26e9-68f1-4f80-b231-79d044431e8e


２．CorvusSKK のインストール

  32bit版 Windows では corvusskk-X.Y.Z-x86.7z を展開し、
  corvusskk-x86.msi を実行して下さい。

  64bit版 Windows では corvusskk-X.Y.Z-x64.7z を展開し、
  corvusskk-x64.msi を実行して下さい。

  （X, Y, Z はバージョン番号）


３．初期設定

  任意のユーザーアカウントで初めて使用するときは、設定ダイアログでOKボタンを押して
  初期設定を保存して下さい。

  バージョンアップで設定項目が追加されているとき、
  機能の種類によっては設定ダイアログで一度は保存する必要があるので、
  バージョンアップしたら動かない機能がある！というときは設定ダイアログで
  OKボタンを押してみて下さい。


４．その他

  XPでは、「テキストサービスと入力言語」ダイアログで「詳細なテキストサービスの
  サポートをプログラムのすべてに拡張する」にチェックを入れて下さい。

  さらに、XP において、デフォルトのローマ字仮名変換表での JIS X 0213 で追加
  された文字（鼻濁音、アイヌ語用仮名等）やSKK辞書の「SKK-JISYO.JIS3_4」、
  「SKK-JISYO.JIS2004」の文字を表示するには、以下のような JIS X 0213:2004 対応
  のフォントをインストールすることが必要です。

  JIS2004 対応 MS ゴシック & MS 明朝フォントパッケージ
  http://www.microsoft.com/ja-jp/windows/products/windowsvista/jp_font/jis04/default.aspx

  Windows XP 向け ClearType 対応メイリオ バージョン 5.00
  http://www.microsoft.com/downloads/ja-jp/details.aspx?FamilyID=f7d758d2-46ff-4c55-92f2-69ae834ac928

  IPAフォント
  http://ossipedia.ipa.go.jp/ipafont/index.html



--------------------------------------------------------------------------------
     設定
--------------------------------------------------------------------------------


・設定ダイアログ

  設定ダイアログで変更した後は、キーボード OFF → ON で新しい設定が反映されます。
  キーボード ON/OFF のキーのみ、キーボード ON → OFF のときにも反映されます。


・設定ファイル、SKK辞書

  各種設定及び取込済SKK辞書は、ディレクトリ %AppData%\CorvusSKK の各ファイルに
  保存されます。

  || config.xml     || 各種設定
  || skkcvdic.xml   || 取込済SKK辞書
  || skkcvdic.idx   || 取込済SKK辞書インデックス

  各種設定の config.xml ファイルは、UTF-8 の XML フォーマットのテキストファイル
  となっており、テキストエディタで編集可能です。
  変更した後は、キーボード OFF → ON で新しい設定が反映されます。


・ユーザ辞書

  ユーザ辞書は、ディレクトリ %AppData%\CorvusSKK のファイルに保存されます。

  || userdic.xml    || ユーザ辞書

  独自フォーマットとしており、他のSKK風ソフトウェアのユーザ辞書との互換性は
  ありません。UTF-8 の XML フォーマットのテキストファイルとなっており、
  テキストエディタで編集可能です。

  ユーザ辞書を編集する際は、ログオンユーザ権限で動作しているサーバプロセス
  （corvussrv.exe）をタクスマネージャなどで終了させた状態で行なって下さい。

  編集後、以下のいずれかの操作を行うとサーバプロセスが自動的に起動します。
    ・キーボード OFF → ON
    ・仮名漢字変換開始
    ・補完開始

  ユーザ辞書は、サーバプロセスの起動時にメモリ上に読み込まれ、
  追加、変更、削除があったとき、かつ、以下のいずれかのときに上書きされます。
    ・キーボード ON 状態から OFF 状態にするとき
    ・キーボード ON 状態のアプリケーションが終了するとき
    ・アプリケーションがフォーカスを失うとき
    ・サーバプロセス（corvussrv.exe）が終了するとき


・動作

  || *機能*                                    || *備考*
  ----------------------------------------------------------------------------
  || 候補一覧のフォント                        || 候補一覧に表示するフォントの種類、スタイル、サイズを指定します。
  || 候補一覧の最大幅                          || 候補一覧の最大幅のサイズを指定します。
  || VisualStyleを使用する                     || Visual Style を使用して候補一覧を表示します。
  || 候補一覧表示に要する変換回数(0は表示無し) || 指定した回数変換すると候補一覧が表示されます。
  || 候補一覧が表示無しのとき候補数を表示する  || (<現在の候補の番号>/<候補数>) の形式を追加して表示します。
  || 注釈を表示する                            || <候補><セミコロン><注釈> の形式で注釈を表示します。
  || ▽▼*マークを表示しない                   || 大切なものは目に見えないようです。
  || 送り仮名が決定したとき変換を開始しない    || 送り仮名を入力したとき自動的に変換を開始しません。接頭辞も同様です。
  || 取消のとき送り仮名を削除する              || ▼モードから▽モードに遷移する際、送り仮名の部分を削除します。
  || 後退に確定を含める                        || ▼モードのとき後退すると一文字削除した上で確定します。OFFでは▼モードのとき後退は前候補と同じ機能を有します。 
  || 候補に片仮名変換を追加する                || 見出し語を片仮名に変換した候補を追加します。


・SKK辞書

  SKK辞書の詳細はこちらを参照下さい。 http://openlab.jp/skk/wiki/wiki.cgi?page=FrontPage
  設定ダイアログのリストにSKK辞書を追加し、取込ボタンを押して下さい。
  独自形式の取込済SKK辞書に変換されて、使用可能となります。
  SKK辞書の文字コードは、EUC-JIS-2004 と UTF-16(LE, BOMあり) に対応しています。
  Emacs Lisp の関数は、(concat "～\073～")、(concat "～\057～") のみ対応して
  います。
  SKK辞書サーバは同時に１つのみ使用可能です。IPv4、IPv6に対応しています。
  サーバコンプリーション機能は未実装です。


・候補一覧選択キー

  候補一覧での確定は、デフォルトで 1～7 と ASDFJKL と asdfjkl を使用します。
  コマンドプロンプト等では、デフォルトで 1～9 と ASDFJKLGH と asdfjklgh を使用
  します。

  || 数字 || 選択キー（1～9で固定）
  || 表示 || 選択キー（候補一覧の表示にも使用）
  || 予備 || 選択キー（空でもOK）


・キー設定０

  キーボード ON/OFF のキーを指定します。
  仮想キーコード、Alt、Control、Shift の組合せを設定して下さい。
  仮想キーコードの詳細はこちらを参照下さい。 http://msdn.microsoft.com/en-us/library/dd375731
  最大で８行です。


・キー設定１、キー設定２

  各機能に対してキーを正規表現で設定して下さい。
  Visual C++ 2010 の TR1 正規表現で、文法は ECMAScript を使用しています。
  正規表現の詳細はこちらを参照下さい。 http://msdn.microsoft.com/en-us/library/bb982727

  無効な正規表現で設定するとその機能は無効となります。警告等は表示されません。
  文字として表記可能なキーのみ設定可能です。


・キー設定デフォルト

  キー設定０

  || *機能*     || *キー*              || *備考*
  ----------------------------------------------------------------------------
  || ON / OFF   || Alt+~               || 0xC0 + Alt
  ||            || 漢字(Alt+半角/全角) || 0x19
  ||            || 半角/全角           || 0xF3, 0xF4

  キー設定１（全英、アスキーモードでは「ひらがな」のみ使用）

  || *機能*     || *キー*         || *備考*
  ----------------------------------------------------------------------------
  || かな／カナ || q              || ひらがな／カタカナモード、かなカナ変換
  || ｶﾅ全英変換 || Ctrl+q         || ひらがなカタカナ→半角カタカナ変換、abbrev→全角英数字変換
  || 全英       || L              || 全英モード
  || ASCII      || l              || アスキーモード
  || ひらがな   || Ctrl+j  Ctrl+q || ひらがなモード
  || abbrev     || /              || abbrevモード
  || 接辞       || <  >           || 接頭辞・接尾辞
  || 直接入力   || 0～9           || 見出し語入力でローマ字仮名変換しない
  || 次候補     || Space  Ctrl+n  || 辞書検索開始、次候補
  || 前候補     || x  Ctrl+p      || 「後退」のキーも使用可
  || 辞書削除   || X  Ctrl+x      || 確認を求めない
  || 次補完     || Ctrl+i(Tab)    || 補完開始、次見出し語候補
  || 前補完     || Ctrl+u         || 前見出し語候補

  キー設定２

  || *機能*     || *キー*                 || *備考*
  ----------------------------------------------------------------------------
  || 確定       || Ctrl+m(Return)  Ctrl+j || 
  || 取消       || Ctrl+g  Ctrl+[(Escape) || 
  || 後退       || Ctrl+h(Backspace)      || 
  || 削除       || DEL(Ctrl+Backspace)    || 辞書登録時のみ使用、Deleteキーも使用可
  || *無効*     ||                        || アプリケーション側に非通知
  || 左移動     || Ctrl+b                 || 辞書登録時のみ使用、矢印キー(←)も使用可
  || 先頭移動   || Ctrl+a                 || 辞書登録時のみ使用、矢印キー(↑)も使用可
  || 右移動     || Ctrl+f                 || 辞書登録時のみ使用、矢印キー(→)も使用可
  || 末尾移動   || Ctrl+e                 || 辞書登録時のみ使用、矢印キー(↓)も使用可
  || 貼付       || Ctrl+y  Ctrl+v         || 辞書登録時のみ使用


・変換位置指定

  変換位置での挙動を指定します。最大で32行です。

   || 開始 || 変換位置開始キー
   || 代替 || 変換位置開始キーに代わってローマ字仮名変換に使用する
   || 送り || 辞書検索に使用する送りローマ字

  例１）AZIK風に、ローマ字仮名変換表で「q ん ン ﾝ 0」と設定し、
    開始「Q」代替「q」送り「n」と設定する。
    「KaQ」と入力すると、表示「▽か*ん」、辞書検索キー「かn」と出来ます。

  例２）開始「;」代替「（空）」送り「（空）」と設定する。
    skk-sticky風となります。ただし、ローマ字仮名変換には回されません。

  例３）開始「;」代替「;」送り「（空）」と設定する。
    skk-sticky風となります。ただし、ローマ字仮名変換表のデフォルト設定のように
    ローマ字として「;」がある場合、「▽；」とローマ字仮名変換されるので、
    「z;」等にセミコロンを定義するといいかもしれません。


・ローマ字・仮名変換表

  ローマ字、平仮名、片仮名、所謂半角片仮名、促音/撥音(ん)の組み合せを指定します。
  促音/撥音(ん)が1のとき、仮名が決定したあとに最後の入力文字が入力状態となります。
  最大で1024行です。


・ASCII・全英変換表

  ASCII、全英文字の組み合せを指定します。最大で128行です。



--------------------------------------------------------------------------------
     その他
--------------------------------------------------------------------------------


・数値変換は、タイプ0～3、数値は0～1垓未満(10^20-1)までの整数に対応しています。
 （見出し語として #｟ナンバーサイン｠を含み、候補として #0, #1, #2, #3 のいずれ
   かを含むエントリが辞書に存在する必要があります。）

  || *候補* || *説明*                     || *例*
  ----------------------------------------------------------------------------
  || #0     || タイプ０ 無変換            ||「1234567890」→「1234567890」
  || #1     || タイプ１ 全角              ||「1234567890」→「１２３４５６７８９０」
  || #2     || タイプ２ 漢数字 位取りあり ||「1234567890」→「一二三四五六七八九〇」
  || #3     || タイプ３ 漢数字 位取りなし ||「1234567890」→「十二億三千四百五十六万七千八百九十」


・Unicodeコードポイント入力

  「U+XXXXXX」( コードポイント XXXXXX : 0000-FFFF または 10000-10FFFF ) の
  フォーマットで変換して下さい。
  例）「▽U+30A2」→「▼ア」


・JIS X 0213 面区点番号入力

  「X-YY-ZZ」( 面 X : 1-2、 区 YY : 01-94、点 ZZ: 01-94 ) のフォーマットで
  変換して下さい。Unicodeコードポイントが注釈として付加されます。
  例）「▽1-05-02」→「▼ア;U+30A2」


・注釈の登録

  辞書登録のとき、登録する候補の入力と同時に行います。
  行頭以外の最後のセミコロン（いわゆる半角のセミコロン）以降が注釈となります。
  注釈にセミコロンを含めることは出来ません。

  例１）登録する見出し語「しょへい#ねん」、登録する候補「初平#3年」、
    登録する注釈「後漢」の場合
    → 「初平#3年;後漢」と入力する。

  例２）登録する見出し語「なき」、登録する候補「(;_;)」、
    登録する注釈「顔文字」の場合
    → 「(;_;);顔文字」と入力する。

  例３）登録する見出し語「せみころん」、登録する候補「;」、
    登録する注釈「セミコロン」の場合
    → 「;;セミコロン」と入力する。


・UILessMode

  コマンドプロンプト、DirectXのゲーム等の候補一覧が独自描画のアプリケーション
  でもとりあえず動きます。（Vista以降）
  ただし、辞書登録ウィンドウを表示しないので、ユーザ入力による任意の候補を
  辞書登録することは出来ません。


・Windows 8 対応について

  現状、Metroアプリケーションでは候補一覧を強制的に表示しないようにしています。
  と言うより表示方法が今のところ不明です。
  ただし、未確認ですがUILessModeだったら表示されるかもしれません。
  
  設定ファイル（config.xml）にMetroアプリケーションへのアクセス許可を付加させる為、
  Windows 8 で動作する設定ダイアログでの保存を行う必要があります。


・開発環境

  Visual C++ 2010 Express + SP1
  Windows SDK 7.1
  WiX 3.5
